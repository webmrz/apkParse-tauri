<script setup lang="ts">
import { computed, ref } from 'vue'; 
import { themeManager } from '../utils/theme';
import SupportInfo from '../components/SupportInfo.vue';

const isDarkMode = computed(() => themeManager.theme.value === 'dark');
const activeSection = ref('basic'); // ç”¨äºè¿½è¸ªå½“å‰æ¿€æ´»çš„éƒ¨åˆ†

const sections = [
  {
    id: 'basic',
    title: 'åŸºæœ¬ä½¿ç”¨',
    icon: 'ğŸ“±'
  },
  {
    id: 'analysis',
    title: 'åˆ†æç»“æœ',
    icon: 'ğŸ“Š'
  },
  {
    id: 'advanced',
    title: 'é«˜çº§åˆ†æï¼ˆTODOï¼‰',
    icon: 'ğŸ”'
  }
];
</script>

<template>
  <div class="help-page" :class="{ 'dark-mode': isDarkMode }">
    <div class="help-content glass-effect">
      <h1 class="page-title">
        <span class="title-icon">ğŸ“–</span>
        ä½¿ç”¨å¸®åŠ©
      </h1>
      
      <div class="section-tabs">
        <button
          v-for="section in sections"
          :key="section.id"
          class="tab-button"
          :class="{ active: activeSection === section.id }"
          @click="activeSection = section.id"
        >
          <span class="tab-icon">{{ section.icon }}</span>
          {{ section.title }}
        </button>
      </div>
      
      <div class="help-sections">
        <transition name="fade" mode="out-in">
          <div v-if="activeSection === 'basic'" key="basic" class="help-section">
            <h2>APKåˆ†æå·¥å…·ä½¿ç”¨æŒ‡å—</h2>
            <div class="feature-card">
              <p class="feature-intro">æœ¬å·¥å…·å¯å¸®åŠ©æ‚¨åˆ†æAndroid APKæ–‡ä»¶ï¼Œæå–åŒ…ä¿¡æ¯ã€æƒé™ã€è¯ä¹¦ç­‰å…³é”®æ•°æ®ã€‚</p>
            </div>
            
            <h3>åŸºæœ¬ä½¿ç”¨æ­¥éª¤</h3>
            <div class="steps-container">
              <div class="step-item">
                <div class="step-number">1</div>
                <div class="step-content">åœ¨é¦–é¡µæ‹–æ”¾æˆ–é€‰æ‹©ä¸€ä¸ªAPKæ–‡ä»¶</div>
              </div>
              <div class="step-item">
                <div class="step-number">2</div>
                <div class="step-content">ç‚¹å‡»"è§£æAPK"æŒ‰é’®å¼€å§‹åˆ†æ</div>
              </div>
              <div class="step-item">
                <div class="step-number">3</div>
                <div class="step-content">åˆ†æå®Œæˆåï¼Œç»“æœä¼šç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</div>
              </div>
            </div>
          </div>

          <div v-else-if="activeSection === 'analysis'" key="analysis" class="help-section">
            <h2>åˆ†æç»“æœè¯´æ˜</h2>
            <div class="info-cards">
              <div class="info-card">
                <div class="card-header">
                  <span class="card-icon">â„¹ï¸</span>
                  <h4>åŸºæœ¬ä¿¡æ¯</h4>
                </div>
                <p>åŒ…åã€ç‰ˆæœ¬å·ã€SDKç‰ˆæœ¬ç­‰</p>
              </div>
              
              <div class="info-card">
                <div class="card-header">
                  <span class="card-icon">ğŸ”’</span>
                  <h4>æƒé™</h4>
                </div>
                <p>åº”ç”¨ç”³è¯·çš„æ‰€æœ‰æƒé™ï¼Œå±é™©æƒé™ä¼šè¢«ç‰¹åˆ«æ ‡è®°</p>
              </div>
              
              <div class="info-card">
                <div class="card-header">
                  <span class="card-icon">ğŸ“œ</span>
                  <h4>è¯ä¹¦ä¿¡æ¯</h4>
                </div>
                <p>åº”ç”¨ç­¾åç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœ‰æ•ˆæœŸå’ŒæŒ‡çº¹</p>
              </div>
              
              <div class="info-card">
                <div class="card-header">
                  <span class="card-icon">ğŸ“</span>
                  <h4>æ–‡ä»¶ä¿¡æ¯</h4>
                </div>
                <p>APKæ–‡ä»¶å“ˆå¸Œå€¼ã€æ–‡ä»¶å¤§å°ç­‰</p>
              </div>
            </div>
          </div>

          <div v-else-if="activeSection === 'advanced'" key="advanced" class="help-section">
            <h2>é«˜çº§åˆ†æåŠŸèƒ½</h2>
            <div class="feature-card">
              <p class="feature-intro">æœ¬å·¥å…·æä¾›å¤šç§é«˜çº§åˆ†æåŠŸèƒ½ï¼Œå¸®åŠ©æ‚¨æ·±å…¥äº†è§£APKæ–‡ä»¶çš„å®‰å…¨æ€§å’Œå†…éƒ¨ç»“æ„ã€‚</p>
            </div>

            <div class="advanced-features">
              <div class="feature-item">
                <div class="feature-header">
                  <span class="feature-icon">ğŸ¦ </span>
                  <h4>ç—…æ¯’åˆ†æ</h4>
                </div>
                <ul class="feature-list">
                  <li>ç¦»çº¿ç—…æ¯’ç‰¹å¾ç æ‰«æ</li>
                  <li>æ¶æ„è¡Œä¸ºæ¨¡å¼è¯†åˆ«</li>
                  <li>é£é™©ä»£ç æ£€æµ‹</li>
                  <li>éšç§åˆè§„æ£€æŸ¥</li>
                </ul>
              </div>

              <div class="feature-item">
                <div class="feature-header">
                  <span class="feature-icon">ğŸ”§</span>
                  <h4>åç¼–è¯‘åˆ†æ</h4>
                </div>
                <ul class="feature-list">
                  <li>Javaæºç åç¼–è¯‘</li>
                  <li>èµ„æºæ–‡ä»¶æå–</li>
                  <li>ä»£ç ç»“æ„åˆ†æ</li>
                  <li>æ•æ„ŸAPIè°ƒç”¨æ£€æµ‹</li>
                </ul>
              </div>

              <div class="feature-item">
                <div class="feature-header">
                  <span class="feature-icon">ğŸ“ˆ</span>
                  <h4>å³å°†æ¨å‡º</h4>
                </div>
                <ul class="feature-list">
                  <li>åŠ¨æ€è¡Œä¸ºåˆ†æ</li>
                  <li>ç½‘ç»œé€šä¿¡ç›‘æ§</li>
                  <li>ç¬¬ä¸‰æ–¹SDKè¯†åˆ«</li>
                  <li>å®‰å…¨æ¼æ´æ‰«æ</li>
                </ul>
              </div>
            </div>
          </div> 
        </transition>
      </div>
    </div>
  </div>
</template>

<style lang="scss" scoped>
.help-page {
  min-height: 100vh;
  padding: clamp(16px, 3vw, 40px);
  background: var(--app-bg);
  color: var(--el-text-color-regular);
  
  &.dark-mode {
    --gradient-start: var(--glass-bg-dark);
    --gradient-end: var(--glass-bg-dark-end);
    --glass-border-color: var(--glass-border-dark);
    --glass-shadow: var(--glass-shadow-dark);
    
    .glass-effect {
      background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
      border-color: var(--glass-border-color);
      box-shadow: var(--glass-shadow);
    }
    
    .page-title::after {
      background: linear-gradient(90deg, 
        var(--el-color-primary-light-3), 
        var(--el-color-primary)
      );
    }
    
    .info-card {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(255, 255, 255, 0.1);
    }
    
    .step-number {
      background: var(--el-color-primary-dark-2);
    }
  }
  
  .help-content {
    max-width: 900px;
    margin: 0 auto;
  }
  
  .glass-effect {
    background: linear-gradient(135deg, 
      var(--glass-bg-light),
      var(--glass-bg-light-end)
    );
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
    border-radius: 16px;
    padding: clamp(24px, 4vw, 48px);
  }
  
  .page-title {
    font-size: clamp(1.75rem, 4vw, 2.25rem);
    margin-bottom: 2.5rem;
    color: var(--el-text-color-primary);
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 12px;
    
    .title-icon {
      font-size: 1.2em;
    }
  }

  .section-tabs {
    display: flex;
    gap: 12px;
    margin-bottom: 2rem;
    
    .tab-button {
      padding: 10px 20px;
      border: none;
      background: transparent;
      color: var(--el-text-color-regular);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1rem;
      
      &:hover {
        background: var(--el-fill-color-light);
      }
      
      &.active {
        background: var(--el-color-primary);
        color: white;
      }
      
      .tab-icon {
        font-size: 1.2em;
      }
    }
  }

  .feature-card {
    background: var(--el-bg-color-overlay);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 2rem;
    border: 1px solid var(--el-border-color-light);
    
    .feature-intro {
      font-size: 1.1rem;
      line-height: 1.6;
      margin: 0;
    }
  }

  .steps-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    
    .step-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--el-bg-color-overlay);
      border-radius: 8px;
      transition: transform 0.3s ease;
      
      &:hover {
        transform: translateX(8px);
      }
      
      .step-number {
        width: 32px;
        height: 32px;
        background: var(--el-color-primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }
      
      .step-content {
        font-size: 1.1rem;
      }
    }
  }

  .info-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
    
    .info-card {
      background: var(--el-bg-color-overlay);
      border: 1px solid var(--el-border-color-light);
      border-radius: 12px;
      padding: 1.25rem;
      transition: all 0.3s ease;
      
      &:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      
      .card-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 0.75rem;
        
        .card-icon {
          font-size: 1.5rem;
        }
        
        h4 {
          margin: 0;
          font-size: 1.1rem;
          font-weight: 600;
          color: var(--el-text-color-primary);
        }
      }
      
      p {
        margin: 0;
        color: var(--el-text-color-regular);
        line-height: 1.5;
      }
    }
  }

  .advanced-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;

    .feature-item {
      background: var(--el-bg-color-overlay);
      border: 1px solid var(--el-border-color-light);
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;

      &:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .feature-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 1rem;

        .feature-icon {
          font-size: 1.75rem;
        }

        h4 {
          margin: 0;
          font-size: 1.2rem;
          font-weight: 600;
          color: var(--el-text-color-primary);
        }
      }

      .feature-list {
        list-style: none;
        padding: 0;
        margin: 0;

        li {
          position: relative;
          padding-left: 1.5rem;
          margin-bottom: 0.75rem;
          color: var(--el-text-color-regular);

          &:before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: var(--el-color-primary);
          }

          &:last-child {
            margin-bottom: 0;
          }
        }
      }
    }
  }

  .note-card {
    background-color: var(--el-fill-color-light);
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    text-align: center;
    font-size: 0.9rem;
    color: var(--el-text-color-secondary);
    border-left: 4px solid var(--el-color-primary);
  }
}

// è¿‡æ¸¡åŠ¨ç”»
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style> 